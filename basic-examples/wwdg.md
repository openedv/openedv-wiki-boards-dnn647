---
title: 'WWDG'
sidebar_position: 7
---

# WWDG

窗口看门狗实验

## 前言

本章我们学习如何使用STM32N647的另外一个看门狗，窗口看门狗（以下简称WWDG）。我们将使用窗口看门狗的中断功能来喂狗。

本实验用LED1用来指示中断喂狗，每次中断喂狗翻转一次。

## 实验准备

1. 下面先计算窗口看门狗的超时公式：

   ```apl
   Twwdg=(4096×2^WDGTB[2:0]×(T[5:0]+1)) /Fppre1
   ```

   其中：

   ​    Twwdg：WWDG超时时间（单位为ms）

   ​    Fppre1：APB的时钟频率（单位为Mhz）

   ​    WDGTB[2:0]：WWDG的预分频系数，0~7

   ​    T[5:0]：窗口看门狗的计数器低6位(最低设置为0X40，所以计算时要用实际设置值-0x40)

   根据我们程序的实际设计，Twwdg=4096×128×64/200000=167.77ms，即闪烁一次约335毫秒。

1. 编写成功后，切换BOOT1跳线帽至3.3V处，便可进行程序下载，下载完之后，将BOOT1跳线帽切换回GND处，对开发板重新上电。

## 实验现象

下载代码后，可以看到LED1开始不停的闪烁。每秒钟闪烁3次左右，说明程序在中断不停的喂狗，和我们预期的一致。
