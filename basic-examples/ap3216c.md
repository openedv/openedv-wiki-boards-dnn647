---
title: 'AP3216C'
sidebar_position: 24
---

# AP3216C

光环境传感器实验

## 前言

上一章，我们介绍了IIC驱动24C02，本章我们将向大家介绍如何使用IIC来驱动光环境传感器。在本章中，我们将使用STM32N647的IIC接口，来驱动AP3216C，从而检测环境光强度（ALS）、接近距离（PS）和红外线强度（IR）等环境参数。

例程开机的时候先检测AP3216C是否存在，如检测不到AP3216C，则在LCD屏幕上面显示报错信息。如果检测到AP3216C，则显示正常，并在主循环里面，循环读取ALS+PS+IR的传感器数据，并显示在LCD屏幕上面。同时，DS0闪烁，提示程序正在运行。

## 实验准备

1. 编写成功后，切换BOOT1跳线帽至3.3V处，便可进行程序下载，下载完之后，将BOOT1跳线帽切换回GND处，对开发板重新上电。

## 实验现象

将程序下载到开发板后，可以看到LED0不停的闪烁，提示程序已经在运行了。LCD显示的内容如下图所示：

![img](./img/22.png)

我们可以用手遮挡/靠近AP3216C传感器，可以看到三个传感器的数据变化，说明我们的代码是工作正常的。

