---
title: 'FDCAN'
sidebar_position: 26
---

# FDCAN

FDCAN通讯实验

## 前言

本章我们将向大家介绍如何使用 STM32N647自带的FDCAN控制器，相比于STM32以前自带的CAN，FDCAN性能更为强大， FDCAN每帧数据最大可以到64字节，FDCAN速度远超CAN的1Mbps，能够达到8Mbps甚至更高。本章我们就来实现两个开发板之间的FDCAN通讯，并将结果显示在LCD模块上。

本章实验内容包含了以下两个部分：

1.FDCAN回环模式实验：需要1个开发板，通过KEY0控制数据发送，接着查询是否有数据接收到，假如接收到数据，就将接收到的数据显示在LCD模块上

2.FDCAN正常模式实验：需要2个开发板，并且将他们的CAN接口对接起来，然后一个开发板发送数据，另外一个开发板将接收到的数据显示在LCD模块上。



## 实验准备

1. FDCAN回环模式实验：只需要单个开发板即可。

   FDCAN正常模式实验：我们用2根导线将两个开发板CAN端子的CAN_L和CAN_L，CAN_H和CAN_H连接起来。这里注意不要接反了（CAN_L接CAN_H），接反了会导致通讯异常！

2. 编写成功后，切换BOOT1跳线帽至3.3V处，便可进行程序下载，下载完之后，将BOOT1跳线帽切换回GND处，对开发板重新上电。

## 实验现象

FDCAN回环模式实验：代码下载成功后，伴随LED0的不停闪烁，提示程序在运行。在回环模式下，按下KEY0就可以在LCD模块上面看到自发自收的数据，如下图所示：

![02](./img/26.png)

FDCAN正常模式实验：下载代码后，按下KEY0后可以发送数据。正常模式下，需要两块开发板，两个开发板CAN端子的CAN_L和CAN_L，CAN_H和CAN_H连接，当开发板A按下KEY0时，LCD显示发送的数据，如下图所示：

![02](./img/27.png)

此时开发板BReceive Data处显示开发板A发送的数据，大家可以多次测试并对比，如下图所示：

![02](./img/28.png)

